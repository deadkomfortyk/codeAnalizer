{"ast":null,"code":"import React,{useEffect,useRef}from'react';import hljs from'highlight.js';import'highlight.js/styles/github-dark.css';import jsPDF from'jspdf';import'jspdf-autotable';import styles from'../style/AnalysisResult.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AnalysisResult=_ref=>{let{result}=_ref;const codeRef=useRef();useEffect(()=>{if(codeRef.current&&result){hljs.highlightElement(codeRef.current);}},[result]);if(!result){return null;}const handleExportPDF=()=>{const doc=new jsPDF();doc.setFontSize(18);doc.text('Analysis Result',14,22);doc.setFontSize(12);doc.text('Code:',14,30);const splitCode=doc.splitTextToSize(result.fileContent,180);const lineHeight=doc.getTextDimensions(splitCode[0]).h;splitCode.forEach((line,index)=>{const y=36+index*lineHeight;doc.text(\"\".concat(index+1).padStart(3,' '),10,y);doc.text(line,20,y);});if(result.issues.length>0){doc.setFontSize(12);doc.text('Issues:',14,36+splitCode.length*lineHeight+10);result.issues.forEach((issue,index)=>{doc.text(\"Line \".concat(issue.line,\": \").concat(issue.issue),14,42+splitCode.length*lineHeight+10+index*lineHeight);});}else{doc.setFontSize(12);doc.text('No found issues',14,36+splitCode.length*lineHeight+10);}doc.save('analysis_result.pdf');};return/*#__PURE__*/_jsxs(\"div\",{className:styles.analysisResult,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442 \\u0430\\u043D\\u0430\\u043B\\u0456\\u0437\\u0443\"}),/*#__PURE__*/_jsx(\"pre\",{className:styles.codeBlock,children:/*#__PURE__*/_jsx(\"code\",{ref:codeRef,className:\"hljs\",children:result.rawContent})}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041F\\u043E\\u043C\\u0438\\u043B\\u043A\\u0438:\"}),result.issues.length>0?/*#__PURE__*/_jsx(\"ul\",{className:styles.issuesList,children:result.issues.map((issue,index)=>/*#__PURE__*/_jsxs(\"li\",{className:styles.issueItem,children:[\"\\u0420\\u044F\\u0434 \",issue.line,\": \",issue.issue]},index))}):/*#__PURE__*/_jsx(\"p\",{className:styles.noIssues,children:\"\\u041F\\u043E\\u043C\\u0438\\u043B\\u043E\\u043A \\u043D\\u0435 \\u0432\\u0438\\u044F\\u0432\\u043B\\u0435\\u043D\\u043E\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.exportButton,onClick:handleExportPDF,children:\"\\u0415\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442 \\u044F\\u043A PDF\"})]});};export default AnalysisResult;","map":{"version":3,"names":["React","useEffect","useRef","hljs","jsPDF","styles","jsx","_jsx","jsxs","_jsxs","AnalysisResult","_ref","result","codeRef","current","highlightElement","handleExportPDF","doc","setFontSize","text","splitCode","splitTextToSize","fileContent","lineHeight","getTextDimensions","h","forEach","line","index","y","concat","padStart","issues","length","issue","save","className","analysisResult","children","codeBlock","ref","rawContent","issuesList","map","issueItem","noIssues","exportButton","onClick"],"sources":["/Users/ruslanpaskudnyk/Desktop/code-analyser/code-analyzer-frontend/frontend/src/components/AnalysisResult.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport hljs from 'highlight.js';\nimport 'highlight.js/styles/github-dark.css';\nimport jsPDF from 'jspdf';\nimport 'jspdf-autotable';\nimport styles from '../style/AnalysisResult.module.css';\n\nconst AnalysisResult = ({ result }) => {\n    const codeRef = useRef();\n\n    useEffect(() => {\n        if (codeRef.current && result) {\n            hljs.highlightElement(codeRef.current);\n        }\n    }, [result]);\n\n    if (!result) {\n        return null;\n    }\n\n    const handleExportPDF = () => {\n        const doc = new jsPDF();\n        doc.setFontSize(18);\n        doc.text('Analysis Result', 14, 22);\n        doc.setFontSize(12);\n        doc.text('Code:', 14, 30);\n\n        const splitCode = doc.splitTextToSize(result.fileContent, 180);\n        const lineHeight = doc.getTextDimensions(splitCode[0]).h;\n\n        splitCode.forEach((line, index) => {\n            const y = 36 + (index * lineHeight);\n            doc.text(`${index + 1}`.padStart(3, ' '), 10, y);\n            doc.text(line, 20, y);\n        });\n\n        if (result.issues.length > 0) {\n            doc.setFontSize(12);\n            doc.text('Issues:', 14, 36 + splitCode.length * lineHeight + 10);\n            result.issues.forEach((issue, index) => {\n                doc.text(\n                    `Line ${issue.line}: ${issue.issue}`,\n                    14,\n                    42 + splitCode.length * lineHeight + 10 + index * lineHeight\n                );\n            });\n        } else {\n            doc.setFontSize(12);\n            doc.text('No found issues', 14, 36 + splitCode.length * lineHeight + 10);\n        }\n\n        doc.save('analysis_result.pdf');\n    };\n\n    return (\n        <div className={styles.analysisResult}>\n            <h2>Результат аналізу</h2>\n            <pre className={styles.codeBlock}>\n                <code ref={codeRef} className=\"hljs\">\n                    {result.rawContent}\n                </code>\n            </pre>\n            <h3>Помилки:</h3>\n            {result.issues.length > 0 ? (\n                <ul className={styles.issuesList}>\n                    {result.issues.map((issue, index) => (\n                        <li key={index} className={styles.issueItem}>\n                            Ряд {issue.line}: {issue.issue}\n                        </li>\n                    ))}\n                </ul>\n            ) : (\n                <p className={styles.noIssues}>Помилок не виявлено</p>\n            )}\n            <button className={styles.exportButton} onClick={handleExportPDF}>Експорт як PDF</button>\n        </div>\n    );\n};\n\nexport default AnalysisResult;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}